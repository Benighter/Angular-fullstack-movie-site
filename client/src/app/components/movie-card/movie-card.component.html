<app-navigation></app-navigation>
<div class="movie-card" [routerLink]="['/movie', movie.id]">
  <div class="card-frame">
    <div class="cyber-corners">
      <span></span><span></span><span></span><span></span>
    </div>

    <!-- Rating indicator with circular progress -->
    <div class="rating-indicator">
      <svg width="45" height="45" viewBox="0 0 45 45">
        <circle cx="22.5" cy="22.5" r="20" fill="rgba(0,0,0,0.5)" stroke="rgba(0, 243, 255, 0.2)" stroke-width="1"></circle>
        <circle
          cx="22.5" cy="22.5" r="20" fill="transparent"
          stroke="var(--primary-neon)" stroke-width="2"
          stroke-dasharray="125.6"
          [attr.stroke-dashoffset]="125.6 - (125.6 * movie.vote_average / 10)"
          transform="rotate(-90 22.5 22.5)">
        </circle>
        <text x="22.5" y="26.5" text-anchor="middle" fill="var(--primary-neon)" font-size="10" font-family="'Courier New', monospace">{{ movie.vote_average.toFixed(1) }}</text>
      </svg>
    </div>

    <div class="poster-container">
      <div class="scan-line"></div>
      <img [src]="movieService.getImageUrl(movie.poster_path)" [alt]="movie.title" class="movie-poster">
      <div class="poster-overlay"></div>
    </div>

    <div class="movie-info">
      <div class="title-container">
        <h3 class="movie-title">{{ movie.title }}</h3>
        <div class="title-underline"></div>
      </div>

      <div class="movie-meta">
        <span class="date">
          <i class="bi bi-calendar3"></i>
          {{ movie.release_date | date:'yyyy' }}
        </span>
      </div>

      <div class="card-actions">
        <button (click)="addToWatchlist($event)" class="watchlist-btn" [class.in-watchlist]="isInWatchlist()">
          <div class="btn-glow"></div>
          <i class="bi" [class.bi-heart-fill]="isInWatchlist()" [class.bi-heart]="!isInWatchlist()"></i>
          <span>{{ isInWatchlist() ? 'SAVED' : 'SAVE' }}</span>
        </button>
        <div class="view-details">
          <span>VIEW DETAILS</span>
          <i class="bi bi-arrow-right"></i>
        </div>
      </div>
    </div>

    <div class="data-stream">
      <div class="data-bit" *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]"></div>
    </div>
  </div>
</div>
<app-topupbutton></app-topupbutton>
